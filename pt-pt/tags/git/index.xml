<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>git on amandamata</title>
    <link>/pt-pt/tags/git/</link>
    <description>amandamata (git)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>pt-pt</language>
    <lastBuildDate>Tue, 30 May 2023 14:01:29 -0300</lastBuildDate>
    
    <atom:link href="/pt-pt/tags/git/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Como apagar uma informação sensível do histórico de commits</title>
      <link>/pt-pt/post/bfg/</link>
      <pubDate>Tue, 30 May 2023 14:01:29 -0300</pubDate>
      
      <guid>/pt-pt/post/bfg/</guid>
      <description>&lt;p&gt;Hoje aprendi algo extremamente útil: como remover informações sensíveis do histórico de commits de forma eficiente.&lt;/p&gt;
&lt;p&gt;Acredito que em algum momento todos nós cometemos o erro de enviar acidentalmente informações sensíveis para um repositório no GitHub, e simplesmente apagar a informação não resolve o problema, uma vez que o histórico de commits ainda mostrará a versão anterior com essas informações.&lt;/p&gt;
&lt;p&gt;Para solucionar essa questão, as pessoas costumam utilizar o git-filter-branch. No entanto, gostaria de apresentar uma alternativa ainda melhor: o BFG.&lt;/p&gt;
&lt;p&gt;O BFG é uma ferramenta poderosa e fácil de usar que permite remover informações confidenciais do histórico de commits do seu repositório de forma segura. Ele oferece uma solução mais rápida e eficiente em comparação com o git-filter-branch.&lt;/br&gt;&lt;/p&gt;
&lt;h4 id=&#34;cenário&#34; &gt;
&lt;div&gt;
    &lt;a href=&#34;#cen%c3%a1rio&#34;&gt;
        ###
    &lt;/a&gt;
    Cenário
&lt;/div&gt;
&lt;/h4&gt;
&lt;p&gt;Temos o repositório &lt;a href=&#34;https://github.com/amandamata/how-to-use-bfg&#34;&gt;how-to-use-bfg&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nesse repositório existia um appsettings.json com informações sensiveis&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://amandamata.github.io/img/bfg1.png&#34; alt=&#34;bfg1&#34;&gt;&lt;/p&gt;
&lt;p&gt;Eu exclui essa informação sensivel, fiz o commit e push, mas no histórico essa informação sensivel ainda aparece&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://amandamata.github.io/img/bfg2.png&#34; alt=&#34;bfg2&#34;&gt;&lt;/p&gt;
&lt;/br&gt;
&lt;h4 id=&#34;como-utilizar&#34; &gt;
&lt;div&gt;
    &lt;a href=&#34;#como-utilizar&#34;&gt;
        ###
    &lt;/a&gt;
    Como utilizar
&lt;/div&gt;
&lt;/h4&gt;
&lt;p&gt;O tutorial no site do BFG não é difícil, mas vou descrever aqui de forma mais detalhada para tornar o processo mais compreensível e simples de seguir.&lt;/p&gt;
&lt;p&gt;Para utilizar o BFG, siga estes passos:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Baixe o arquivo .jar do site do &lt;a href=&#34;https://rtyley.github.io/bfg-repo-cleaner/&#34;&gt;BFG&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Faça um clone do repositório atual usando o comando:
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;git clone git@github.com:amandamata/how-to-use-bfg.git --mirror
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;Crie um arquivo de referência contendo o valor que deseja remover do histórico de commits. Por exemplo:
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;echo *VyieIqbij35MYV5&amp;amp;bIakKmq1Z &amp;gt; auth.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;Execute o BFG, passando o valor de referência, usando o seguinte comando:
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;java -jar ~/Downloads/bfg-1.14.0.jar --replace-text auth.txt how-to-use-bfg.git
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;Acesse o diretório do repositório clonado:
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cd how-to-use-bfg.git
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;Execute o seguinte comando:
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;git reflog expire --expire=now --all &amp;amp;&amp;amp; git gc --prune=now --aggressive
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;Faça o push das alterações:
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;git push
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/br&gt;
Após seguir esses passos, o histórico de commits do seu repositório será atualizado e as informações sensíveis serão removidas.
&lt;p&gt;&lt;img src=&#34;https://amandamata.github.io/img/bfg3.png&#34; alt=&#34;bfg3&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
