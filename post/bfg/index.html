<!DOCTYPE html>


<html lang="en" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>How to remove sensitive information from commit history - amandamata</title>

<meta name="description" content="Today I learned something extremely useful: how to efficiently remove sensitive information from commit history.
I believe that at some point, we have all made the mistake of accidentally pushing sensitive information to a repository on GitHub. Simply deleting the information does not solve the problem because the commit history will still show the previous version with that sensitive information.
To address this issue, people often use git-filter-branch. However, I would like to introduce an even better alternative: BFG.">





<link rel="icon" type="image/x-icon" href="https://amandamata.github.io/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://amandamata.github.io/favicon.png">








    



<style>
  body {
    visibility: hidden;
    opacity: 0;
  }
</style>

<noscript>
  <style>
    body {
      visibility: visible;
      opacity: 1;
    }
  </style>
</noscript>




    





    
    
        
    
    

    
        <link rel="stylesheet" href="/css/style.min.184a655c5ad8596648622468e6696abf0cf0a2cf8266df17b4f7a36fe9c97551.css" integrity="sha256-GEplXFrYWWZIYiRo5mlqvwzwos&#43;CZt8XtPejb&#43;nJdVE=">
    





    





    
    
        
    
    

    
        <link rel="stylesheet" href="/css/style.min.c4c04b3ef88e3d619ad4c7ee5e03048422bc55c4fefdc1f07657c1133670aa22.css" integrity="sha256-xMBLPviOPWGa1MfuXgMEhCK8VcT&#43;/cHwdlfBEzZwqiI=">
    





    





    
    
        
    
    

    
        <link rel="stylesheet" href="/css/style.min.21c5d8fe0a79d623b0adc1ce4bd4f6dd2c05cd939c9aaaa966ba7186b1464f4d.css" integrity="sha256-IcXY/gp51iOwrcHOS9T23SwFzZOcmqqpZrpxhrFGT00=">
    












    

    





    
    
        
    
    

    
        <script src="/js/script.min.08f04d96386c73c9bf4d160333f8f448c05a6e01c06770542ee0e013954ce930.js" type="text/javascript" charset="utf-8" integrity="sha256-CPBNljhsc8m/TRYDM/j0SMBabgHAZ3BULuDgE5VM6TA="></script>
    



















    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header class="common-header">
            
                <div class="header-top">
    <div class="header-top-left">
        <h1 class="site-title noselect">
    <a href="/">amandamata</a>
</h1>

        







    
        <div class="theme-switcher">
            <span class="inline-svg">

    


    
    
    
    
    

    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-sun-high"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14.828 14.828a4 4 0 1 0 -5.656 -5.656a4 4 0 0 0 5.656 5.656z" /><path d="M6.343 17.657l-1.414 1.414" /><path d="M6.343 6.343l-1.414 -1.414" /><path d="M17.657 6.343l1.414 -1.414" /><path d="M17.657 17.657l1.414 1.414" /><path d="M4 12h-2" /><path d="M12 4v-2" /><path d="M20 12h2" /><path d="M12 20v2" /></svg>


</span>

        </div>
    

    <script>
        const STORAGE_KEY = 'user-color-scheme'
        const defaultTheme = "light"

        let currentTheme
        let switchButton
        let autoDefinedScheme = window.matchMedia('(prefers-color-scheme: dark)')

        function switchTheme(e) {
            currentTheme = (currentTheme === 'dark') ? 'light' : 'dark';
            if (localStorage) localStorage.setItem(STORAGE_KEY, currentTheme);
            document.documentElement.setAttribute('data-theme', currentTheme);
            changeGiscusTheme(currentTheme);
            document.body.dispatchEvent(new CustomEvent(currentTheme + "-theme-set"));
        }

        const autoChangeScheme = e => {
            currentTheme = e.matches ? 'dark' : 'light'
            document.documentElement.setAttribute('data-theme', currentTheme);
            changeGiscusTheme(currentTheme);
            document.body.dispatchEvent(new CustomEvent(currentTheme + "-theme-set"));
        }

        document.addEventListener('DOMContentLoaded', function () {
            switchButton = document.querySelector('.theme-switcher')
            currentTheme = detectCurrentScheme()

            if (currentTheme === 'auto') {
                autoChangeScheme(autoDefinedScheme);
                autoDefinedScheme.addListener(autoChangeScheme);
            } else {
                document.documentElement.setAttribute('data-theme', currentTheme)
            }

            if (switchButton) {
                switchButton.addEventListener('click', switchTheme, false)
            }

            showContent();
        })

        function detectCurrentScheme() {
            if (localStorage !== null && localStorage.getItem(STORAGE_KEY)) {
                return localStorage.getItem(STORAGE_KEY)
            }
            if (defaultTheme) {
                return defaultTheme
            }
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        function showContent() {
            document.body.style.visibility = 'visible';
            document.body.style.opacity = 1;
        }

        function changeGiscusTheme (theme) {
            function sendMessage(message) {
              const iframe = document.querySelector('iframe.giscus-frame');
              if (!iframe) return;
              iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
            }

            sendMessage({
              setConfig: {
                theme: theme
              }
            });
        }
    </script>


        <ul class="social-icons noselect">







    <li>
            <a href="/index.xml" title="RSS" rel="me">
            <span class="inline-svg">

    


    
    
    
    
    

    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-rss"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M4 4a16 16 0 0 1 16 16" /><path d="M4 11a9 9 0 0 1 9 9" /></svg>


</span>

            </a>
        </li>
    

</ul>

    </div>
    <div class="header-top-right">

    </div>
</div>


    <nav></nav>








            
        </header>
        <main id="main" tabindex="-1">
            
    

    <article class="post h-entry">
        <div class="post-header">
            <header>
                <h1 class="p-name post-title">How to remove sensitive information from commit history</h1>
                
    
    <span>
        <ul class="post-translations">
            
                
                    <li>
                        EN
                    </li>
                
            
                
                    <li>
                        <a href="/pt-pt/post/bfg/">PT-PT</a>
                    </li>
                
            
        </ul>
    </span>


            </header>
            



<div class="post-info noselect">
    
        <div class="post-date dt-published">
            <time datetime="2023-05-30">2023-05-30</time>
            
        </div>
    

    <a class="post-hidden-url u-url" href="/post/bfg/">/post/bfg/</a>
    <a href="https://amandamata.github.io" class="p-name p-author post-hidden-author h-card" rel="me"></a>


    <div class="post-taxonomies">
        
        
            <ul class="post-tags">
                
                    
                    <li><a href="/tags/git/">#git</a></li>
                
            </ul>
        
        
    </div>
</div>

        </div>
        

  
  




  
  
  
  <details class="toc noselect">
    <summary>Table of Contents</summary>
    <div class="inner"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav></div>
  </details>
  



<script>
  var toc = document.querySelector(".toc");
  if (toc) {
    toc.addEventListener("click", function () {
      if (event.target.tagName !== "A") {
        event.preventDefault();
        if (this.open) {
          this.open = false;
          this.classList.remove("expanded");
        } else {
          this.open = true;
          this.classList.add("expanded");
        }
      }
    });
  }
</script>

        <div class="content e-content">
            <p>Today I learned something extremely useful: how to efficiently remove sensitive information from commit history.</p>
<p>I believe that at some point, we have all made the mistake of accidentally pushing sensitive information to a repository on GitHub. Simply deleting the information does not solve the problem because the commit history will still show the previous version with that sensitive information.</p>
<p>To address this issue, people often use git-filter-branch. However, I would like to introduce an even better alternative: BFG.</p>
<p>BFG is a powerful and user-friendly tool that allows you to securely remove confidential information from your repository&rsquo;s commit history. It provides a faster and more efficient solution compared to git-filter-branch.</br></br></p>
<h5 id="scenario" >
<div>
    <a href="#scenario">
        ####
    </a>
    Scenario
</div>
</h5>
<p>We have the repository how-to-use-bfg.</p>
<p>In this repository, there was an appsettings.json file with sensitive information:</p>
<p><img src="/img/bfg1.png" alt="bfg"></p>
<p>I deleted this sensitive information, made the commit and push, but the sensitive information still appears in the commit history:</p>
<p><img src="/img/bfg2.png" alt="bfg2"></p>
<p></br></br></p>
<h5 id="how-to-use" >
<div>
    <a href="#how-to-use">
        ####
    </a>
    How to Use
</div>
</h5>
<p>The tutorial on the BFG website is not difficult, but I will describe it here in more detail to make the process easier to understand.</p>
<p>To use BFG, follow these steps:</p>
<ol>
<li>Download the .jar file from the <a href="https://rtyley.github.io/bfg-repo-cleaner/">BFG</a> website.</li>
<li>Clone the current repository using the command:
<pre tabindex="0"><code>git clone git@github.com:amandamata/how-to-use-bfg.git --mirror
</code></pre></li>
<li>Create a reference file containing the value you want to remove from the commit history. For example:
<pre tabindex="0"><code>echo *VyieIqbij35MYV5&amp;bIakKmq1Z &gt; auth.txt
</code></pre></li>
<li>Run BFG, passing the reference value, using the following command:
<pre tabindex="0"><code>java -jar ~/Downloads/bfg-1.14.0.jar --replace-text auth.txt how-to-use-bfg.git
</code></pre></li>
<li>Access the cloned repository directory:
<pre tabindex="0"><code>cd how-to-use-bfg.git
</code></pre></li>
<li>Run the following command:
<pre tabindex="0"><code>git reflog expire --expire=now --all &amp;&amp; git gc --prune=now --aggressive
</code></pre></li>
<li>Push the changes:
<pre tabindex="0"><code>git push
</code></pre></li>
</ol>
<p>After following these steps, your repository&rsquo;s commit history will be updated, and the sensitive information will be removed.</p>
<p><img src="/img/bfg3.png" alt="bfg3"></p>
<p>Give BFG a try and ensure that your confidential information is protected in the commit history.</p>

        </div>

    </article>

    
    

    
        
        
    

    

    
        









    

    

    

        </main>
        
            <footer class="common-footer noselect">
    
    
        <ul class="language-select">
    
    
    

    
        
            <li><a href="/pt-pt/post/bfg/">pt</a></li>
        
    
        
            <li>en</li>
        
    
</ul>

    

    <div class="common-footer-bottom">
        

        <div style="display: flex; align-items: center; gap:8px">
            Â© amanda, 2024
            
        </div>
        <div style="display:flex;align-items: center">
            
            
            
            
            
            
        </div>
        <div>
            Powered by <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" rel="noopener noreferrer" href="https://github.com/Junyi-99/hugo-theme-anubis2">Anubis2</a>.<br>
            

        </div>
    </div>

    <p class="h-card vcard">

    <a href=https://amandamata.github.io class="p-name u-url url fn" rel="me"></a>

    

    
</p>

</footer>

        
    </div>
</body>
</html>
