<!DOCTYPE html>


<html lang="en" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>Refit - amandabytes</title>

<meta name="description" content="Recently, I had the opportunity to test a great C# library that significantly improves the development of an SDK.
In later experiences develop an sdk project was something really honorous, wee need to create a lot of classes and methods to handle with the api request and response. Then, during my researchs I found Refit.
Refit is an rest library that helps a lot during an sdk develpment, you just need to create the contract classes (if you already has in an side project is even easyer), and create the interfaces for each controller. Simple as that.">





<link rel="icon" type="image/x-icon" href="https://amandamata.github.io/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://amandamata.github.io/favicon.png">






    



    



<style>
  body {
    visibility: hidden;
    opacity: 0;
  }
</style>

<noscript>
  <style>
    body {
      visibility: visible;
      opacity: 1;
    }
  </style>
</noscript>




    





    
    
        
    
    

    
        <link rel="stylesheet" href="/css/style.min.184a655c5ad8596648622468e6696abf0cf0a2cf8266df17b4f7a36fe9c97551.css" integrity="sha256-GEplXFrYWWZIYiRo5mlqvwzwos&#43;CZt8XtPejb&#43;nJdVE=">
    





    





    
    
        
    
    

    
        <link rel="stylesheet" href="/css/style.min.c4c04b3ef88e3d619ad4c7ee5e03048422bc55c4fefdc1f07657c1133670aa22.css" integrity="sha256-xMBLPviOPWGa1MfuXgMEhCK8VcT&#43;/cHwdlfBEzZwqiI=">
    





    





    
    
        
    
    

    
        <link rel="stylesheet" href="/css/style.min.21c5d8fe0a79d623b0adc1ce4bd4f6dd2c05cd939c9aaaa966ba7186b1464f4d.css" integrity="sha256-IcXY/gp51iOwrcHOS9T23SwFzZOcmqqpZrpxhrFGT00=">
    












    

    





    
    
        
    
    

    
        <script src="/js/script.min.08f04d96386c73c9bf4d160333f8f448c05a6e01c06770542ee0e013954ce930.js" type="text/javascript" charset="utf-8" integrity="sha256-CPBNljhsc8m/TRYDM/j0SMBabgHAZ3BULuDgE5VM6TA="></script>
    



















    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header class="common-header">
            
                <div class="header-top">
    <div class="header-top-left">
        <h1 class="site-title noselect">
    <a href="/">amandabytes</a>
</h1>

        



    



    



    
        <div class="theme-switcher">
            <span class="inline-svg">

    


    
    
    
    
    

    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-sun-high"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14.828 14.828a4 4 0 1 0 -5.656 -5.656a4 4 0 0 0 5.656 5.656z" /><path d="M6.343 17.657l-1.414 1.414" /><path d="M6.343 6.343l-1.414 -1.414" /><path d="M17.657 6.343l1.414 -1.414" /><path d="M17.657 17.657l1.414 1.414" /><path d="M4 12h-2" /><path d="M12 4v-2" /><path d="M20 12h2" /><path d="M12 20v2" /></svg>


</span>

        </div>
    

    <script>
        const STORAGE_KEY = 'user-color-scheme'
        const defaultTheme = "auto"

        let currentTheme
        let switchButton
        let autoDefinedScheme = window.matchMedia('(prefers-color-scheme: dark)')

        function switchTheme(e) {
            currentTheme = (currentTheme === 'dark') ? 'light' : 'dark';
            if (localStorage) localStorage.setItem(STORAGE_KEY, currentTheme);
            document.documentElement.setAttribute('data-theme', currentTheme);
            changeGiscusTheme(currentTheme);
            document.body.dispatchEvent(new CustomEvent(currentTheme + "-theme-set"));
        }

        const autoChangeScheme = e => {
            currentTheme = e.matches ? 'dark' : 'light'
            document.documentElement.setAttribute('data-theme', currentTheme);
            changeGiscusTheme(currentTheme);
            document.body.dispatchEvent(new CustomEvent(currentTheme + "-theme-set"));
        }

        document.addEventListener('DOMContentLoaded', function () {
            switchButton = document.querySelector('.theme-switcher')
            currentTheme = detectCurrentScheme()

            if (currentTheme === 'auto') {
                autoChangeScheme(autoDefinedScheme);
                autoDefinedScheme.addListener(autoChangeScheme);
            } else {
                document.documentElement.setAttribute('data-theme', currentTheme)
            }

            if (switchButton) {
                switchButton.addEventListener('click', switchTheme, false)
            }

            showContent();
        })

        function detectCurrentScheme() {
            if (localStorage !== null && localStorage.getItem(STORAGE_KEY)) {
                return localStorage.getItem(STORAGE_KEY)
            }
            if (defaultTheme) {
                return defaultTheme
            }
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        function showContent() {
            document.body.style.visibility = 'visible';
            document.body.style.opacity = 1;
        }

        function changeGiscusTheme (theme) {
            function sendMessage(message) {
              const iframe = document.querySelector('iframe.giscus-frame');
              if (!iframe) return;
              iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
            }

            sendMessage({
              setConfig: {
                theme: theme
              }
            });
        }
    </script>


        <ul class="social-icons noselect">


    
        
        
        <li>
            <a href="https://github.com/amandamata" title="Github" rel="me">
            <span class="inline-svg">

    


    
    
    
    
    

    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-github"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" /></svg>


</span>

            </a>
        </li>
    

    
        <li>
            <a href="https://www.linkedin.com/in/amanda-mata/" title="Linkedin" rel="me">
            <span class="inline-svg">

    


    
    
    
    
    

    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-linkedin"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z" /><path d="M8 11l0 5" /><path d="M8 8l0 .01" /><path d="M12 16l0 -5" /><path d="M16 16v-3a2 2 0 0 0 -4 0" /></svg>


</span>

            </a>
        </li>
    







</ul>

    </div>
    <div class="header-top-right">
        <ul class="post-translations">
    
    
    

    
        
            <li>en</li>
        
    
        
            <li><a href="/pt-pt/post/refit/">pt-br</a></li>
        
    
</ul>

    </div>
</div>


    <nav class="noselect">
        
        
        <a class="" href="https://amandamata.github.io/" title="amandabytes">home</a>
        
        <a class="" href="https://amandamata.github.io/tags" title="">tags</a>
        
        <a class="" href="https://amandamata.github.io/post" title="">archive</a>
        
        <a class="" href="https://amandamata.github.io/about" title="">about</a>
        
    </nav>








            
        </header>
        <main id="main" tabindex="-1">
            
    

    <article class="post h-entry">
        <div class="post-header">
            <header>
                <h1 class="p-name post-title">Refit</h1>
            </header>
            



<div class="post-info noselect">
    
        <div class="post-date dt-published">
            <time datetime="2024-08-04">2024-08-04</time>
            
        </div>
    

    <a class="post-hidden-url u-url" href="/post/refit/">/post/refit/</a>
    <a href="https://amandamata.github.io/" class="p-name p-author post-hidden-author h-card" rel="me"></a>


    <div class="post-taxonomies">
        
        
            <ul class="post-tags">
                
                    
                    <li><a href="/tags/dotnet/">#Dotnet</a></li>
                
                    
                    <li><a href="/tags/sdk/">#Sdk</a></li>
                
                    
                    <li><a href="/tags/refit/">#Refit</a></li>
                
            </ul>
        
        
    </div>
</div>

        </div>
        

  
  
    
  






<script>
  var toc = document.querySelector(".toc");
  if (toc) {
    toc.addEventListener("click", function () {
      if (event.target.tagName !== "A") {
        event.preventDefault();
        if (this.open) {
          this.open = false;
          this.classList.remove("expanded");
        } else {
          this.open = true;
          this.classList.add("expanded");
        }
      }
    });
  }
</script>

        <div class="content e-content">
            <p>Recently, I had the opportunity to test a great C# library that significantly improves the development of an SDK.</p>
<p>In later experiences develop an sdk project was something really honorous, wee need to create a lot of classes and methods to handle with the api request and response. Then, during my researchs I found <a href="https://github.com/reactiveui/refit">Refit</a>.</p>
<p>Refit is an rest library that helps a lot during an sdk develpment, you just need to create the contract classes (if you already has in an side project is even easyer), and create the interfaces for each controller. Simple as that.</p>
<h3 id="without-refit-x-with-refit" >
<div>
    <a href="#without-refit-x-with-refit">
        ##
    </a>
    Without Refit x With Refit
</div>
</h3>
<p>Without Refit:</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#ff6ac1">using</span> System;
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">using</span> System.Net.Http;
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">using</span> System.Threading.Tasks;
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">using</span> Newtonsoft.Json;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">public</span> <span style="color:#ff6ac1">class</span> <span style="color:#f3f99d">ApiClient</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">private</span> <span style="color:#ff6ac1">readonly</span> HttpClient _httpClient;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">public</span> ApiClient(HttpClient httpClient)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _httpClient = httpClient;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">public</span> <span style="color:#ff5c57">async</span> Task&lt;User&gt; GetUserAsync(<span style="color:#9aedfe">int</span> userId)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#9aedfe">var</span> response = <span style="color:#ff6ac1">await</span> _httpClient.GetAsync(<span style="color:#5af78e">$&#34;https://api.example.com/users/{userId}&#34;</span>);
</span></span><span style="display:flex;"><span>        response.EnsureSuccessStatusCode();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#9aedfe">var</span> content = <span style="color:#ff6ac1">await</span> response.Content.ReadAsStringAsync();
</span></span><span style="display:flex;"><span>        <span style="color:#ff6ac1">return</span> JsonConvert.DeserializeObject&lt;User&gt;(content);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">public</span> <span style="color:#ff6ac1">class</span> <span style="color:#f3f99d">User</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">public</span> <span style="color:#9aedfe">int</span> Id { <span style="color:#ff6ac1">get</span>; <span style="color:#ff6ac1">set</span>; }
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">public</span> <span style="color:#9aedfe">string</span> Name { <span style="color:#ff6ac1">get</span>; <span style="color:#ff6ac1">set</span>; }
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">public</span> <span style="color:#9aedfe">string</span> Email { <span style="color:#ff6ac1">get</span>; <span style="color:#ff6ac1">set</span>; }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>With Refit:</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#ff6ac1">using</span> System;
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">using</span> System.Threading.Tasks;
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">using</span> Refit;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">public</span> <span style="color:#ff6ac1">interface</span> <span style="color:#f3f99d">IApiClient</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#57c7ff">    [Get(&#34;/users/{userId}&#34;)]</span>
</span></span><span style="display:flex;"><span>    Task&lt;User&gt; GetUserAsync(<span style="color:#9aedfe">int</span> userId);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">public</span> <span style="color:#ff6ac1">class</span> <span style="color:#f3f99d">User</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">public</span> <span style="color:#9aedfe">int</span> Id { <span style="color:#ff6ac1">get</span>; <span style="color:#ff6ac1">set</span>; }
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">public</span> <span style="color:#9aedfe">string</span> Name { <span style="color:#ff6ac1">get</span>; <span style="color:#ff6ac1">set</span>; }
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">public</span> <span style="color:#9aedfe">string</span> Email { <span style="color:#ff6ac1">get</span>; <span style="color:#ff6ac1">set</span>; }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">public</span> <span style="color:#ff6ac1">class</span> <span style="color:#f3f99d">Program</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">public</span> <span style="color:#ff5c57">static</span> <span style="color:#ff5c57">async</span> Task Main(<span style="color:#9aedfe">string</span>[] args)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#9aedfe">var</span> apiClient = RestService.For&lt;IApiClient&gt;(<span style="color:#5af78e">&#34;https://api.example.com&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#9aedfe">var</span> user = <span style="color:#ff6ac1">await</span> apiClient.GetUserAsync(<span style="color:#ff9f43">1</span>);
</span></span><span style="display:flex;"><span>        Console.WriteLine(<span style="color:#5af78e">$&#34;Name: {user.Name}, Email: {user.Email}&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol>
<li>
<p>Define the Interface: You start by defining an interface that represents your API. Each method in the interface corresponds to an API endpoint. You use attributes to specify the HTTP method (e.g., GET, POST) and the route.</p>
</li>
<li>
<p>Create the Data Models: Define the data models that represent the JSON responses from the API.</p>
</li>
<li>
<p>Generate the Implementation: Refit generates the implementation of the interface at runtime. You don&rsquo;t need to write any additional code to handle the HTTP requests and responses. You create an instance of the API client using RestService.For<T>().</p>
</li>
<li>
<p>Make API Calls: You can now use the generated client to make API calls. Refit handles the serialization and deserialization of the request and response data, making the code much cleaner and easier to maintain.</p>
</li>
</ol>
<h3 id="authorization" >
<div>
    <a href="#authorization">
        ##
    </a>
    Authorization
</div>
</h3>
<p>Simple as that:</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#ff6ac1">using</span> Refit;
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">using</span> System.Threading.Tasks;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">public</span> <span style="color:#ff6ac1">interface</span> <span style="color:#f3f99d">IApiClient</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#57c7ff">    [Headers(&#34;Authorization: Bearer&#34;)]</span>
</span></span><span style="display:flex;"><span><span style="color:#57c7ff">    [Get(&#34;/users/{userId}&#34;)]</span>
</span></span><span style="display:flex;"><span>    Task&lt;User&gt; GetUserAsync(<span style="color:#9aedfe">int</span> userId);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>You can find more examples of authorization in the <a href="https://github.com/reactiveui/refit">Refit repository</a>.</p>
<h3 id="benefits" >
<div>
    <a href="#benefits">
        ##
    </a>
    Benefits
</div>
</h3>
<ul>
<li>Simplicity: Refit abstracts away the boilerplate code required for making HTTP requests, allowing you to focus on defining your API contracts.</li>
<li>Maintainability: By defining your API endpoints as interfaces, your code becomes more modular and easier to maintain.</li>
<li>Type Safety: Refit provides compile-time checking of your API contracts, reducing the likelihood of runtime errors.</li>
<li>Integration: Refit integrates seamlessly with other .NET libraries and frameworks, making it a versatile choice for .NET developers.</li>
</ul>

        </div>

    </article>

    
    
        
    

    
        
        
            <h3 class="read-next-title noselect">Read next</h3>
            <ul class="read-next-posts noselect">
                
                <li><a href="/post/telemetry/">An easy way to measure your method performance</a></li>
                
                <li><a href="/post/redis/">Implementing Redis Caching with .NET</a></li>
                
                <li><a href="/post/queue-csharp-sqs/">Implementing an SQS Publisher and Consumer Using .NET</a></li>
                
                <li><a href="/post/curly-brace/">Curly braces on new line in vscode</a></li>
                
            </ul>
        
    

    

    

    

        </main>
        
            <footer class="common-footer noselect">
    <div class="common-footer-bottom">
        

        <div style="display: flex; align-items: center; gap:8px">
            © 2025
            
        </div>
        <div style="display:flex;align-items: center">
            
            
            
            
            
            
        </div>
        <div>
            Powered by <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" rel="noopener noreferrer" href="https://github.com/amandamata/hugo-theme-anubis2">Anubis2</a>.<br>
            

        </div>
    </div>

    <p class="h-card vcard">

    <a href=https://amandamata.github.io/ class="p-name u-url url fn" rel="me"></a>

    

    
</p>

</footer>

        
    </div>
</body>
</html>
